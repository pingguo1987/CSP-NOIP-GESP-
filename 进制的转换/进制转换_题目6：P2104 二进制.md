## 题目5：P2104 二进制

[P2104 二进制](https://www.luogu.com.cn/problem/P2104)

本题是二进制的加减乘除题。

**同类题目**



### 前置知识

- 无

**题目描述**

小 Z 最近学会了二进制数，他觉得太小的二进制数太没意思，于是他想对一个巨大二进制数做以下 $4$ 种基础运算：

运算 $1$：将整个二进制数加 $1$。

运算 $2$：将整个二进制数减 $1$。

运算 $3$：将整个二进制数乘 $2$。

运算 $4$：将整个二进制数整除 $2$。

小 Z 很想知道运算后的结果，他只好向你求助。

（Ps：为了简化问题，数据保证 `+`，`-` 操作不会导致最高位的进位与退位）

**输入格式**

第一行两个正整数 $n,m$，表示原二进制数的长度以及运算数。

接下来一行 $n$ 个字符，分别为 `0` 或 `1` 表示这个二进制数。

第三行 $m$ 个字符，分别为 `+`，`-`，`*`，`/`，对应运算 $1,2,3,4$。

**输出格式**

一行若干个字符，表示经过运算后的二进制数。

**样例输入 #1**

```
4 10
1101
*/-*-*-/*/
```

**样例输出 #1**

```
10110
```

**提示**

对于 $30\%$ 的数据，$1 \leq n,m \leq 1000$。

对于 $60\%$ 的数据，$1 \leq n,m \leq 10^5$。

对于 $100\%$ 的数据，$1 \leq n,m \leq 5 \times 10^6$。



**思路分析**



**程序代码**

```c++
//https://www.luogu.com.cn/problem/B2141
//B2141 确定进制
#include<iostream>
#include<cmath>
using namespace std;

long long ktod(string s,int x)
{
    long long sum = 0;
    for(int i=0;i<s.size();i++)
    {
        if(s[i] >= x)
        if(s[i]>='0' && s[i]<='9')
        {
            // 数位大于等于进制了，肯定不合法，比如2进制数：113，2进制不可能出现大于等于2的数字
            if((s[i]-'0') >= x)
            {
                return -1;
            }
            // 如果是数字，则减'0' 后转换为数字
            sum += (s[i]-'0') * pow(x,s.size()-i-1);
        }else
        {
            if((s[i]-'A' + 10) >= x)
            {
                return -1;    
            }
            // 如果是A-Z 则需要减'A'+10 转换为数字
            sum += (s[i]-'A' + 10) * pow(x,s.size()-i-1);
        }          
    }
    return sum;
}

// 将不同的进制转成十进制，然后计算乘法，和结果进行比较是否相同
int main()
{
    
    string p,q,r;
    cin>>p>>q>>r;
    
    // 对每一种进制都尝试计算，看看是否能够相等
    for(int k=2;k<=16;k++)
    {
        // 转换成k进制，并在转换的时候判断是否合法，如果不合法直接跳过
        long long num1 = ktod(p,k);
        if(num1 == -1)
        {
            continue;
        }
        long long num2 = ktod(q,k);
        if(num2 == -1)
        {
            continue;
        }
        long long num3 = ktod(r,k);
        if(num3 == -1)
        {
            continue;
        }
        if(num1*num2 == num3)
        {
            cout<<k<<endl;
            return 0;
        }
    }
    // 不符合要求输出0
    cout<<0<<endl;
    return 0;
}
```



**题目感悟**

本题对我来说最重要一个收获就是进制求和时，如何将字符转成可以运算的数字并将计算后的结果转成字符。

---

欢迎关注我的公众号**wangsir 聊信息学**，原创技术文章第一时间推送。

<center>
    <img src="https://cdn.jsdelivr.net/gh/pingguo1987/CSP-NOIP-GESP-/image/pic/公众号-扫码版.png">
</center>
